{% extends "base.html" %}
{% block title %}cart page{% endblock %}
{% block content %}
<div class="container mt-4">
    <h2> your cart </h2>
    <a href="{% url 'product:product_list' %}" class="btn btn-mb-3 btn-secondary">Back to product list page</a>


    <table class="table table-bordered">
        <thead>
        <tr>
            <th>Product</th>
            <th>Unit Price</th>
            <th>Number</th>
            <th>Total Price</th>
            <th>Operations</th>
        </tr>
        </thead>
        <tbody>
        {% for item in cart %}
        <tr>
            <td>{{ item.product.name }}</td>
            <td>${{ item.price }}</td>
            <td>
                <form action="{% url 'order:add_to_cart' item.product.id %}" method="post">
                    {% csrf_token %}
                    {{ item.update_quantity_form.quantity}}
                    <input type="hidden" name="override" value="True">
                    <button type="submit" class="btn btn-sm btn-primary">Update</button>

                </form>
            </td>
            <td>${{ item.total_price }}</td>
            <td>
              <form action="{% url 'order:cart_remove' item.product.id %}" method="post" style="display:Inline">
                  {% csrf_token %}
                  <button type="submit" class="btn btn-sm btn-danger">Remove</button>
              </form>
            </td>
        </tr>
        {% endfor %}
        </tbody>

    </table>
    <h4> total sum: ${{cart.get_total_price }}</h4>

    <form method="post" action="{% url 'order:checkout' %}">
        {% csrf_token %}
        <button type="submit" class="btn btn-success"> Process to Checkout </button>
    </form>



</div>
{% endblock %}